---
deployments:
  - helm:
      chart:
        name: examples/chart/teleport-cluster
      values:
        chartMode: standalone
        clusterName: ${CLUSTER_NAME}
        extraVolumeMounts:
          - mountPath: /usr/lib/ssl/certs/root-ca.crt
            name: teleport-certs
            readOnly: true
            subPath: root-ca.crt
          - mountPath: /usr/lib/ssl/certs/intermediate-ca.crt
            name: teleport-certs
            readOnly: true
            subPath: intermediate-ca.crt
        extraVolumes:
          - configMap:
              name: teleport-certs
            name: teleport-certs
        highAvailability:
          certManager:
            enabled: true
            issuerGroup: cert-manager.io
            issuerKind: ClusterIssuer
            issuerName: ${CLUSTER_ISSUER_NAME}
        insecureSkipProxyTLSVerify: true
        rtsoft:
          ingress:
            annotations:
              nginx.ingress.kubernetes.io/ssl-passthrough: "true"
            ingressClassName: ${INGRESS_CLASS_NAME}
          storageClassName: csi-disk
          tokens:
            - node,app:no-token
        service:
          type: ClusterIP
        standalone:
          volumeSize: 4Gi
    name: teleport-cluster
    namespace: teleport-cluster
vars:
  - name: CLUSTER_NAME
    value: console.svc.ritms.online
  - name: INGRESS_CLASS_NAME
    value: nginx
  - name: CLUSTER_ISSUER_NAME
    value: letsencrypt-cluster-issuer
version: v1beta11
